define("udx.social.stream",["jquery","modernizr","isotope","jquery.fancybox","udx.utility.imagesloaded"],function a(){function b(){a.__log||(a.__log=[]),a.__log.push(arguments),console.debug.apply(console,["udx.social.stream",arguments])}function c(a,b){this.create(a,b)}function d(a,c,d,o,s,t,u,v,w,x,y){b("getFeed");var z,A,B,C,D,E=jQuery(".stream",s),F=[],G=300,H=t.limit,I="https://ajax.googleapis.com/ajax/services/feed/load?v=1.0&num="+H+"&callback=?&q=";switch(a){case"facebook":C=c.split("/"),B=B=C.length>1?"https://graph.facebook.com/"+C[1]+"/photos?fields=id,link,from,name,picture,images,comments&limit="+H:I+encodeURIComponent("https://www.facebook.com/feeds/page.php?id="+c+"&format=rss20");break;case"twitter":var J=o.url.replace(/\&#038;/gi,"&");C=c.split("/"),D=c.split("#"),cu=o.url.split("?"),replies=1==o.replies?"&exclude_replies=false":"&exclude_replies=true";var K="&include_entities=true&include_rts="+o.retweets+replies;if(url1=cu.length>1?J+"&":J+"?",B=C.length>1?url1+"url=list&list_id="+C[1]+"&per_page="+H+K:url1+"url=timeline&screen_name="+c+"&count="+H+K,D.length>1){{0==o.retweets?"+exclude:retweets":""}B=url1+"url=search&q="+encodeURIComponent(D[1])+"&count="+H}break;case"google":H=H>100?100:H,A="https://plus.google.com/"+c,B="https://www.googleapis.com/plus/v1/people/"+c+"/activities/public",z={key:o.api_key,maxResults:H,prettyprint:!1,fields:"items(id,kind,object(attachments(displayName,fullImage,id,image,objectType,url),id,objectType,plusoners,replies,resharers,url),published,title,url,verb)"};break;case"youtube":C=c.split("/"),D=c.split("#"),H=H>50?50:H,A="https://www.youtube.com/",A+=D.length>1?"results?search_query="+encodeURIComponent(D[1]):"user/"+c,A=C.length>1?"https://www.youtube.com/playlist?list="+C[1]:A,B="https://gdata.youtube.com/feeds/",B+=C.length>1?"api/playlists/"+C[1]+"?v=2&orderby=published":D.length>1?"api/videos?alt=rss&orderby=published&max-results="+H+"&racy=include&q="+encodeURIComponent(D[1]):"base/users/"+c+"/"+x+"?alt=rss&v=2&orderby=published&client=ytapi-youtube-profile",B=I+encodeURIComponent(B);break;case"flickr":D=c.split("/"),fd=D.length>1?"groups_pool":"photos_public",c=D.length>1?D[1]:c,A="https://www.flickr.com/photos/"+c,B="http://api.flickr.com/services/feeds/"+fd+".gne?id="+c+"&lang="+o.lang+"&format=json&jsoncallback=?";break;case"delicious":A="https://www.delicious.com/"+c,B="http://feeds.delicious.com/v2/json/"+c;break;case"pinterest":C=c.split("/"),B="https://www.pinterest.com/"+c+"/",B+=C.length>1?"rss":"feed.rss",A="http://www.pinterest.com/"+c,B=I+encodeURIComponent(B);break;case"rss":A=c,B=I+encodeURIComponent(c);break;case"lastfm":A="https://www.last.fm/user/"+c;var L="lovedtracks"==x?"2.0":"1.0";B=I+encodeURIComponent("https://ws.audioscrobbler.com/"+L+"/user/"+c+"/"+x+".rss");break;case"dribbble":A="https://www.dribbble.com/"+c,B="likes"==x?"http://api.dribbble.com/players/"+c+"/shots/likes":"http://api.dribbble.com/players/"+c+"/shots";break;case"vimeo":A="https://www.vimeo.com/"+c,B="https://vimeo.com/api/v2/"+c+"/"+x+".json";break;case"stumbleupon":A="https://www.stumbleupon.com/stumbler/"+c,B=I+encodeURIComponent("http://rss.stumbleupon.com/user/"+c+"/"+x);break;case"deviantart":A="https://"+c+".deviantart.com",B=I+encodeURIComponent("https://backend.deviantart.com/rss.xml?type=deviation&q=by%3A"+c+"+sort%3Atime+meta%3Aall");break;case"tumblr":A="http://"+c+".tumblr.com",B="http://"+c+".tumblr.com/api/read/json?callback=?";break;case"instagram":switch(A="#",B="https://api.instagram.com/v1",C=c.substr(0,1),D=c.split(C),url1=encodeURIComponent(D[1]),qs="",ts=0,C){case"?":var M=D[1].split("/");qs="&lat="+M[0]+"&lng="+M[1]+"&distance="+M[2],B+="/media/search";break;case"#":B+="/tags/"+url1+"/media/recent",ts=1;break;case"!":B+="/users/"+url1+"/media/recent";break;case"@":B+="/locations/"+url1+"/media/recent"}""==o.accessToken&&0==ts&&(location.hash?o.accessToken=location.hash.split("=")[1]:location.href="https://instagram.com/oauth/authorize/?client_id="+o.clientId+"&redirect_uri="+o.redirectUrl+"&response_type=token"),B+="?access_token="+o.accessToken+"&client_id="+o.clientId+"&count="+H+qs}var N="twitter"==a?"json":"jsonp";return jQuery.ajax({url:B,data:z,cache:t.cache,dataType:N,success:function(m){var p="";switch(a){case"facebook":C.length>1?m=m.data:200==m.responseStatus?m=m.responseData.feed.entries:p=m.responseDetails;break;case"google":p=m.error?m.error:"",m=m.items;break;case"flickr":m=m.items;break;case"instagram":m=m.data;break;case"twitter":p=m.errors?m.errors:"",D.length>1&&(m=m.statuses);break;case"youtube":if(200==m.responseStatus){if(m=m.responseData.feed.entries,C.length>1)var q=C[0]}else p=m.responseDetails;break;case"dribbble":m=m.shots;break;case"tumblr":m=m.posts;break;case"delicious":break;case"vimeo":break;default:200==m.responseStatus?m=m.responseData.feed.entries:p=m.responseDetails}""==p?jQuery.each(m,function(m,p){if(H>m){var s=p.link,w='<a href="'+A+'">'+c+"</a>",z="",B='<a href="'+s+'">'+p.title+"</a>",D="",E="",I="",J="",K=p.publishedDate,L=s,M=p.title,N="";switch(a){case"facebook":if(C.length>1){c=p.from.id;var K=new Date;K=K.setFbAlbum(p.created_time);var O=l(p.link);M=""!=C[0]?C[0]:p.from.name,w='<a href="http://www.facebook.com/media/set/?set='+O[1]+'">'+M+"</a>",B="",E='<a href="'+p.link+'" class="social-stream-image"><img class="social-stream-image" src="'+p.images[o.image_width].source+'" alt="" /></a>',o.comments>0&&p.comments&&(m=0,J+='<span class="meta"><span class="comments">comments</span></span>',jQuery.each(p.comments.data,function(a,b){return o.comments>a?(J+='<span class="meta item-comments"><a href="http://facebook.com/'+b.from.id+'">'+b.from.name+"</a>"+b.message+"</span>",void a++):!1})),E+=J}else E=p[o.text];break;case"twitter":K=i(p.created_at);var P=p.user.screen_name,Q=p.user.profile_image_url_https;A="https://www.twitter.com/"+P,s=A,D='<a href="'+s+'" class="social-stream-image thumb"><img class="social-stream-image" src="'+Q+'" alt="" /></a>',E='<div class="text">'+e(p.text)+"</div>",img='<div class="images">',""!=o.images&&p.entities.media&&jQuery.each(p.entities.media,function(a,b){img+='<a href="'+b.media_url_https+'" class="social-stream-image"><img class="social-stream-image img-responsive" src="'+b.media_url_https+":"+o.images+'" alt="" /></a>'}),img+="</div>",L=p.id_str;break;case"delicious":var K=new Date;K=K.setRFC3339(p.dt),B='<a href="'+p.u+'">'+p.d+"</a>",s=p.u,E=p.n,L=p.u,M=p.d;break;case"rss":E=p[o.text];break;case"pinterest":var R=jQuery("img",p.content).attr("src");D=R?'<a href="'+s+'"><img class="social-stream-image" src="'+R+'" alt="" /></a>':"",E=p.contentSnippet,M=E;break;case"youtube":var S=[];S=l(p.link),D='<a href="'+s+'" title="'+p.title+'"><img src="http://img.youtube.com/vi/'+S.v+"/"+o.thumb+'.jpg" class="social-stream-image social-stream-youtube" alt="" /></a>',E=p.contentSnippet,C.length>1&&(w='<a href="'+A+'">'+q+"</a>");break;case"flickr":K=i(p.published),B=p.title,D='<a href="'+s+'" title="'+p.title+'"><img src="'+p.media.m+'" class="social-stream-image" alt="" /></a>';break;case"lastfm":s=p.content;break;case"dribbble":s=p.url,K=p.created_at,D='<a href="'+s+'"><img src="'+p.image_teaser_url+'" class="social-stream-image"  alt="'+p.title+'" /></a>',E='<span class="meta"><span class="views">'+k(p.views_count)+'</span><span class="likes">'+k(p.likes_count)+'</span><span class="comments">'+k(p.comments_count)+"</span></span>",L=p.url;break;case"instagram":K=parseInt(1e3*p.created_time,10),B="",D='<a href="'+p.images[o.thumb].url+'" class="social-stream-image"><img class="social-stream-image img-responsive" src="'+p.images[o.thumb].url+'" alt="" /></a>',E=null!=p.caption?g(p.caption.text):"",w='<a href="'+s+'">'+p.user.username+"</a>",M=null!=p.caption?p.caption.text:"";break;case"vimeo":if(f=x,U=p.name,V=p.description,s=p.url,"channels"==f)D=""!=p.logo?'<a href="'+s+'" class="logo"><img src="'+p.logo+'" class="social-stream-image" alt="" width="'+G+'" /></a>':"";else if("groups"==f)D='<a href="'+s+'"><img src="'+p.thumbnail+'" alt="" /></a>';else{var T="thumbnail_"+o.thumb,U=p.title,V="albums"!=f?p.duration+" secs":p.description;D='<a href="'+p.url+'" title="'+U+'"><img src="'+p[T]+'" alt="" /></a>'}if(B='<a href="'+s+'">'+U+"</a>",E=V,1==o.stats){var J="";J+="albums"==f||"channels"==f||"groups"==f?'<span class="videos">'+k(p.total_videos)+"</span>":"","channels"==f?J+='<span class="users">'+k(p.total_subscribers)+"</span>":"groups"==f?J+='<span class="users">'+k(p.total_members)+"</span>":"albums"!=f&&(J+='<span class="likes">'+k(p.stats_number_of_likes)+'</span><span class="views">'+k(p.stats_number_of_plays)+'</span><span class="comments">'+k(p.stats_number_of_comments)+"</span>"),E+='<span class="meta">'+J+"</span>"}var W=p.upload_date;"likes"==f?W=p.liked_on:("albums"==f||"channels"==f||"groups"==f)&&(W=p.created_on);var K=new Date;K=K.setVimeo(W),L=s,M=U;break;case"stumbleupon":var R=jQuery("img",p.content).attr("src");D=""!=R&&"favorites"==x?'<a href="'+s+'"><img src="'+R+'" alt="" /></a>':"",E=p.contentSnippet;break;case"deviantart":var R=jQuery("img",p.content).attr("src");D=R?'<a href="'+s+'"><img src="'+R+'" alt="" /></a>':"",E=p.contentSnippet;break;case"tumblr":switch(s=p["url-with-slug"],K=p.date,B='<a href="'+s+'">',p.type){case"photo":B=p["photo-caption"],E='<a href="'+s+'"><img src="'+p["photo-url-"+o.thumb]+'" alt="" /></a>',M=B;break;case"video":B+=p["video-caption"],E="400"!=o.video?p["video-player-"+o.video]:p["video-player"],M=B;break;case"regular":B+=p["regular-title"],E=p["regular-body"],M=B;break;case"quote":B+=p["quote-source"],E=p["quote-text"],M=B;break;case"audio":B=p["id3-artist"]?'<a href="'+s+'">'+p["id3-artist"]+" - "+p["id3-album"]+"</a>":"",B+=p["id3-title"]?'<a href="'+s+'" class="track">'+p["id3-title"]+"</a>":"",E=p["audio-caption"],E+=p["audio-player"],M=p["id3-artist"]+" - "+p["id3-album"]+" - "+p["id3-title"];break;case"conversation":B+=p["conversation-title"],E=p["conversation-text"],M=B;break;case"link":var X=p["link-text"].replace(/:/g,"").replace(/\?/g,"").replace(/\!/g,"").replace(/\./g,"").replace(/\'/g,"");B='<a href="'+p["link-url"]+'">'+X+"</a>",E=p["link-description"],M=X}B+="photo"!=p.type||"audio"!=p.type?"</a>":"",M=h(M),L=s;break;case"google":var Y,Z=p.object.replies?k(p.object.replies.totalItems):0,J=p.object.plusoners?k(p.object.plusoners.totalItems):0,$=p.object.resharers?k(p.object.resharers.totalItems):0,K=new Date;K=K.setRFC3339(p.published),Y={src:"",imgLink:"",useLink:"",useTitle:""};var _=p.object.attachments;if(_&&_.length){for(var ab=0;ab<_.length;ab++){var bb=_[ab];bb.image&&(Y.src=bb.image.url,Y.imgLink=bb.url,bb.fullImage&&(Y.w=bb.fullImage.width||0,Y.h=bb.fullImage.height||0)),"article"==bb.objectType&&(Y.useLink=bb.url),bb.displayName&&(Y.useTitle=bb.displayName)}Y.useLink||(Y.useLink=Y.imgLink);var cb=o.image_height?o.image_height:75,db=o.image_width?o.image_width:75;Y.src.indexOf("resize_h")>=0&&(Y.src=Y.w>=Y.h?Y.src.replace(/resize_h=\d+/i,"resize_h="+cb):Y.src.replace(/resize_h=\d+/i,"resize_w="+db))}Y=Y,s=Y.useLink,D=Y.src?(Y.useLink?'<a href="'+Y.useLink+'">':"")+'<img src="'+Y.src+'" />'+(Y.useLink?"</a>":""):"";var eb=G/(Y.w/Y.h)<G/3?' class="clear"':"";B=(Y.useLink?'<a href="'+Y.useLink+'"'+eb+">":"")+(p.title?p.title:Y.useTitle)+(Y.useLink?"</a>":""),o.shares&&(E='<span class="meta"><span class="plusones">+1s '+J+'</span><span class="shares">'+$+'</span><span class="comments">'+Z+"</span></span>"),L=s,M=Y.useTitle}switch(a){case"facebook":icon='<a class="network-label lll" href="'+p.link+'"><img src="'+d+o.icon+'" alt="" class="icon" /></a>';break;case"twitter":icon='<a class="network-label" href="https://twitter.com/'+P+"/status/"+p.id_str+'"><img src="'+d+o.icon+'" alt="" class="icon" /></a>';break;default:icon='<a class="network-label" href="'+s+'"><img src="'+d+o.icon+'" alt="" class="icon" /></a>'}if("twitter"==a){var fb="https://twitter.com/intent/";N='<a href="'+fb+"tweet?in_reply_to="+L+"&via="+t.twitterId+'" class="share-reply"></a>',N+='<a href="'+fb+"retweet?tweet_id="+L+"&via="+t.twitterId+'" class="share-retweet"></a>',N+='<a href="'+fb+"favorite?tweet_id="+L+'" class="share-favorite"></a>'}else N=r(M,L,t.twitterId);jQuery.each(o.out.split(","),function(c,d){switch(I+="intro"!=d?'<span class="section-'+d+'">':"",d){case"intro":b("getFeed",a),zintro="twitter"==a?'<div class="section-'+d+'"><a href="https://twitter.com/'+P+"/status/"+p.id_str+'">'+j(new Date(K).getTime(),0)+"</a></div>":'<div class="section-'+d+'"><a href="'+s+'">'+j(new Date(K).getTime(),0)+"</a></div>";break;case"title":I+=B;break;case"thumb":if("rss"==a){var e=p.content.indexOf("img")>=0?jQuery("img",p.content).attr("src"):"";D=e?'<a href="'+s+'" class="thumb"><img src="'+e+'" alt="" /></a>':""}I+=D;break;case"image":"twitter"==a&&(I+=img);break;case"text":I+=E;break;case"user":I+=w;break;case"meta":I+=J;break;case"share":I+=N}I+="intro"!=d?"</span>":""});var gb="instagram"==a?j(K,1):j(new Date(K).getTime(),1),hb=gb;switch(t.order){case"random":hb=n(6);break;case"none":hb=1}var ib='<li rel="'+hb+'" url="'+s+'" data-net="'+a+'" class="dcsns-li dcsns-'+a+" dcsns-feed-"+y+' stream-item-wrapper"><div class="stream-item-outer">'+z+'<div class="inner">'+I+"</div>"+zintro+icon+"</div></li>",jb=t.remove;if(-1!==jb.indexOf(s)&&""!=s)H+=1;else if("days"==t.max){if(86400*v>=gb&&gb>=86400*u)F.push(ib);else if(gb>86400*v)return!1}else F.push(ib)}}):1==t.debug&&F.push('<li class="dcsns-li dcsns-error">Error. '+p+"</li>")},complete:function(){b("getFeed:complete");var d=jQuery(F.join(""));1==t.wall?require("udx.utility.imagesloaded")(E.get(0),function(){b("getFeed:complete","stream images loaded"),E.get(0).isotope.insert(d)}):(E.append(d),m(E,"asc")),"facebook"==a&&C.length<2?p(c,d):"flickr"==a&&D.length>1&&q(D[1],d)}}),this}function e(a){return b("linkify"),a=a.replace(/((https?\:\/\/)|(www\.))(\S+)(\w{2,4})(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/gi,function(a){var b=a.match("^https?://")?a:"http://"+a;return'<a href="'+b+'">'+a+"</a>"}),a=a.replace(/(^|\s)@(\w+)/g,'$1@<a href="http://www.twitter.com/$2">$2</a>'),a=a.replace(/(^|\s)#(\w+)/g,'$1#<a href="http://twitter.com/search/%23$2">$2</a>')}function g(a){return jQuery("<div/>").text(a).html()}function h(a){var b=jQuery(a);return b.text()}function i(a){var b=navigator.userAgent.indexOf("MSIE")>=0?a.replace(/(\+\S+) (.*)/,"$2 $1"):a;return b}function j(a,b){var c=Math.round((+new Date-a)/1e3),d="",e="mins";if(1==b)return c;if(0==b){var f=new Array;f[0]=[31536e3,"year","years"],f[1]=[2592e3,"month","months"],f[2]=[604800,"week","weeks"],f[3]=[86400,"day","days"],f[4]=[3600,"hr","hrs"],f[5]=[60,"min","mins"];var g=0,h=f.length;for(g=0;h>g;g++)if(s=f[g][0],0!=(xj=Math.floor(c/s))){e=1==xj?f[g][1]:f[g][2];break}return d+=1==xj?"1 "+e:xj+" "+e,h>g+1&&(s2=f[g+1][0],0!=(xj2=Math.floor((c-s*xj)/s2))&&(n2=1==xj2?f[g+1][1]:f[g+1][2],d+=1==xj2?" + 1 "+n2:" + "+xj2+" "+n2)),d+=" ago"}}function k(a){var b=a;return a>999999?b=Math.floor(a/1e6)+"M":a>9999?b=Math.floor(a/1e3)+"K":a>999&&(b=Math.floor(a/1e3)+","+a%1e3),b}function l(a){var b,c=[],d=a.split("?")[1];if(void 0!=d){d=d.split("&");for(var e=0;e<d.length;e++)b=d[e].split("="),c.push(b[1]),c[b[0]]=b[1]}return c}function m(a,b){var c=jQuery("li",a);c.sort(function(a,c){var d=parseInt($(a).attr("rel"),10),e=parseInt($(c).attr("rel"),10);return"asc"==b?d>e?1:-1:e>d?1:-1}),jQuery.each(c,function(b,c){a.append(c)}),jQuery(".dcsns-loading").slideUp().remove()}function n(a){for(var b=0,c="";a>b;)c+=Math.floor(10*Math.random()+1)+"",b++;return c}function o(a,b,c){var d,e=jQuery("li:last",a),f=jQuery("li:first",a),g=f.outerHeight(!0);if($("li",a).not(".inactive").length>2)if("next"==b){if(d=e.clone().hide(),f.before(d),e.remove(),!e.hasClass("inactive"))return jQuery(".inner",d).css({opacity:0}),void d.slideDown(c,"linear",function(){jQuery(".inner",this).animate({opacity:1},c)});o(a,b,c)}else d=f.clone(),f.hasClass("inactive")?(e.after(d),f.remove(),o(a,b,c)):(f.animate({marginTop:-g+"px"},c,"linear",function(){e.after(d),f.remove()}),jQuery(".inner",f).animate({opacity:0},c))}function p(a,b){jQuery.ajax({url:"https://graph.facebook.com/"+a,dataType:"jsonp",success:function(a){jQuery(".icon",b).each(function(){jQuery(this).parent().attr("href",a.link)}),jQuery(".section-user a",b).each(function(){jQuery(this).attr("href",a.link),jQuery(this).text(a.name)})}})}function q(a,b){jQuery.ajax({url:"http://api.flickr.com/services/feeds/groups_pool.gne?id="+a+"&format=json&jsoncallback=?",dataType:"jsonp",success:function(a){jQuery(".icon",b).each(function(){jQuery(this).parent().attr("href",a.link)})}})}function r(a,b,c){var d="",b=encodeURIComponent(b),a=encodeURIComponent(a);return d='<a href="http://www.facebook.com/sharer.php?u='+b+"&t="+a+'" class="share-facebook"></a>',d+='<a href="https://twitter.com/share?url='+b+"&text="+a+"&via="+c+'" class="share-twitter"></a>',d+='<a href="https://plus.google.com/share?url='+b+'" class="share-google"></a>',d+='<a href="http://www.linkedin.com/shareArticle?mini=true&url='+b+"&title="+a+'" class="share-linkedin"></a>'}function t(){jQuery(".stream .dcsns-li").prepend('<a class="moderate" href="javascript:;">x</a>'),jQuery("a.moderate",jQuery(".stream")).on("click",function(a){var b=jQuery(this);jQuery("a.moderate",jQuery(".stream")).hide(),b.parent().css({transition:"5s opacity",opacity:"0"}),a.stopPropagation(),jQuery.ajax(ajaxurl,{type:"post",data:{action:"social_stream_moderate",item:b.parent().attr("url")},complete:function(){jQuery("a.moderate",jQuery(".stream")).show(),b.parent().hide(),setTimeout(function(){jQuery(".filter a.iso-active").click()},100)}})})}function u(){b("enableFilters");var a={},c=jQuery(".stream");jQuery(".filter a.social-stream-filter").click(function(){b("enableFilters","filter");{var c,d=jQuery(this),e=[],f=d.parents(".dcsns-toolbar"),g=f.next();jQuery(".stream",g)}jQuery(".filter a",f).removeClass("iso-active"),d.addClass("iso-active"),a[d.data("group")]=d.data("filter");for(c in a)e.push(a[c]);return!1}),c.get(0).isotope.layout()}function v(){b("SocialStream","windowResized"),jQuery(".stream").get(0).isotope.layout}b("SocialStream");{var w=require("isotope");require("udx.utility.imagesloaded")}return a.__log=[],Date.prototype.setRFC3339=function(a){var b,c,d,e=1,f=a.split("T"),g=f[0].split("-"),h=f[1].split(":"),i=h[h.length-1],j=i.charAt(i.length-1);return"Z"==j?(b=0,h[h.length-1]=i.substr(0,i.length-2)):(-1!=i[i.length-1].indexOf("+")?(c="+",e=1):(c="-",e=-1),d=i.split(c),h[h.length-1]==d[0],d=d[1].split(":"),b=60*d[0]+d[1],b=60*b*1e3),this.setTime(Date.UTC(g[0],g[1]-1,g[2],h[0],h[1],h[2])+b*e),this},Date.prototype.setFbAlbum=function(a){var b,c="+",d=1,e=a.split("T"),f=e[0].split("-"),g=e[1].split(":"),h=g[g.length-1];-1!=h[h.length-1].indexOf("+")&&(c="-",d=-1);var i=h.split(c);return b=60*parseInt(i[1]/100,10)*1e3,this.setTime(Date.UTC(f[0],f[1]-1,f[2],g[0],g[1],i[0])+b*d),this},Date.prototype.setVimeo=function(a){var b=0,c=1,d=a.split(" "),e=d[0].split("-"),f=d[1].split(":");return this.setTime(Date.UTC(e[0],e[1]-1,e[2],f[0],f[1],f[2])+b*c),this},jQuery.extend(c.prototype,{version:"1.5.5",create:function(a,c){b("create"),this.defaults={feeds:{facebook:{id:"",intro:"Posted",out:"intro,thumb,title,text,user,share",text:"content",comments:3,image_width:4,icon:"facebook.png"},twitter:{id:"",intro:"Tweeted",search:"Tweeted",out:"intro,thumb,text,share",retweets:!1,replies:!1,images:"",url:"twitter.php",icon:"twitter.png"},google:{id:"",intro:"Shared",out:"intro,thumb,title,text,share",api_key:"",image_height:75,image_width:75,shares:!0,icon:"google.png"},youtube:{id:"",intro:"Uploaded,Favorite,New Video",search:"Search",out:"intro,thumb,title,text,user,share",feed:"uploads,favorites,newsubscriptionvideos",thumb:"default",icon:"youtube.png"},flickr:{id:"",intro:"Uploaded",out:"intro,thumb,title,text,share",lang:"en-us",icon:"flickr.png"},delicious:{id:"",intro:"Bookmarked",out:"intro,thumb,title,text,user,share",icon:"delicious.png"},pinterest:{id:"",intro:"Pinned",out:"intro,thumb,text,user,share",icon:"pinterest.png"},rss:{id:"",intro:"Posted",out:"intro,title,text,share",text:"contentSnippet",icon:"rss.png"},lastfm:{id:"",intro:"Listened to,Loved,Replied",out:"intro,thumb,title,text,user,share",feed:"recenttracks,lovedtracks,replytracker",icon:"lastfm.png"},dribbble:{id:"",intro:"Posted,Liked",out:"intro,thumb,title,text,user,share",feed:"shots,likes",icon:"dribbble.png"},vimeo:{id:"",intro:"Liked,Video,Appeared In,Video,Album,Channel,Group",out:"intro,thumb,title,text,user,share",feed:"likes,videos,appears_in,all_videos,albums,channels,groups",thumb:"medium",stats:!0,icon:"vimeo.png"},stumbleupon:{id:"",intro:"Shared,Reviewed",out:"intro,thumb,title,text,user,share",feed:"favorites,reviews",icon:"stumbleupon.png"},deviantart:{id:"",intro:"Deviation",out:"intro,thumb,title,text,user,share",icon:"deviantart.png"},tumblr:{id:"",intro:"Posted",out:"intro,title,text,user,share",thumb:100,video:250,icon:"tumblr.png"},instagram:{id:"",intro:"Posted",search:"Search",out:"intro,thumb,text,user,share,meta",accessToken:"",redirectUrl:"",clientId:"",thumb:"low_resolution",comments:3,likes:8,icon:"instagram.png"}},remove:"",twitterId:"",days:10,limit:50,max:"days",external:!0,speed:600,height:550,wall:!1,order:"date",filter:!0,controls:!0,rotate:{direction:"up",delay:8e3},cache:!0,container:"dcsns",cstream:"stream",content:"dcsns-content",iconPath:"images/dcsns-dark/",imagePath:"images/dcsns-dark/",debug:!1},this.o={},this.timer_on=0,this.id="dcsns-"+$(a).index(),this.timerId="",this.o=jQuery.extend(!0,this.defaults,c),opt=this.o,$load=jQuery('<div class="dcsns-loading">creating stream ...</div>'),jQuery(a).addClass(this.o.container).append('<div class="'+this.o.content+'"><ul class="'+this.o.cstream+'"></ul></div>');{var d=jQuery("."+this.o.content,a),e=jQuery("."+this.o.cstream,a);jQuery("li",e)}if(opt.height>0&&0==opt.wall&&d.css({height:opt.height+"px"}),1==this.o.filter||1==this.o.controls){b("create","enable filters");var f='<div class="dcsns-toolbar">';if(1==this.o.filter){f+='<ul id="dcsns-filter" class="option-set filter">',f+=1==this.o.wall?'<li><a href="#filter" data-group="dc-filter" data-filter="*" class="social-stream-filter iso-active">stream</a></li>':"";{jQuery(".filter",a)}jQuery.each(opt.feeds,function(a,b){f+=""!=b.id?'<li class="active f-'+a+'"><a href="#filter" rel="'+a+'" class="social-stream-filter" data-group="dc-filter" data-filter=".dcsns-'+a+'">'+a+"</a></li>":""}),f+="</ul>"}if(1==this.o.controls&&0==opt.wall){var g=this.o.rotate.delay<=0?"":'<li><a href="#" class="play"></a></li>';f+='<div class="controls"><ul>'+g+'<li><a href="#" class="prev"></a></li><li><a href="#" class="next"></a></li></ul></div>'}f+="</div>",0==opt.wall?jQuery(a).append(f):jQuery(a).before(f)}1==this.o.wall?(jQuery(".dcsns-toolbar").append($load),this.createwall(e)):d.append($load),this.createstream(a,e,0,opt.days),this.addevents(a,e),this.o.rotate.delay>0&&this.rotate(a),1==this.o.filter&&window.setTimeout(function(){u()},1e3),$load.remove()},createstream:function(a,c,e,f){b("createstream"),jQuery.each(opt.feeds,function(b){if(""!=opt.feeds[b].id){var c=[];jQuery.each(opt.feeds[b].intro.split(","),function(a,b){b=jQuery.trim(b),c.push(b)}),jQuery.each(opt.feeds[b].id.split(","),function(g,h){h=jQuery.trim(h),opt.feeds[b].feed&&h.split("#").length<2?"youtube"==b&&h.split("/").length>1?d(b,h,opt.iconPath,opt.feeds[b],a,opt,e,f,"posted","",g):jQuery.each(opt.feeds[b].feed.split(","),function(g,i){d(b,h,opt.iconPath,opt.feeds[b],a,opt,e,f,c[g],i,g)}):(intro=h.split("#").length<2?opt.feeds[b].intro:opt.feeds[b].search,d(b,h,opt.iconPath,opt.feeds[b],a,opt,e,f,intro,"",g))})}})},createwall:function(a){b("createwall"),require("udx.utility.imagesloaded")(a.get(0),function(){b("createwall","imagesLoaded"),a.get(0).isotope=new w(a.get(0),{itemSelector:"li.dcsns-li",getSortData:{postDate:function(a){return parseInt(a.getAttribute("rel"))}},sortBy:"postDate"}),jQuery(".section-text img",a).parents("a").fancybox({live:!0}),jQuery("a.social-stream-image",a).fancybox({live:!0})})},addevents:function(a,c){b("addevents");{var d=this,e=this.o.speed;jQuery(".stream",a)}jQuery(".controls",a).delegate("a","click",function(){b(".controls:click");var f=jQuery(this).attr("class");switch(f){case"prev":d.pauseTimer(),o(c,"prev",e);break;case"next":d.pauseTimer(),o(c,"next",e);break;case"play":d.rotate(a),jQuery(".controls .play").removeClass("play").addClass("pause");break;case"pause":d.pauseTimer()}return!1}),jQuery(".filter",a).delegate("a","click",function(){if(b(".filter:click"),0==opt.wall){var a=jQuery(this).attr("rel");$(this).parent().hasClass("active")?(jQuery(".dcsns-"+a,c).slideUp().addClass("inactive"),jQuery(this).parent().animate({opacity:.3},400)):(jQuery(".dcsns-"+a,c).slideDown().removeClass("inactive"),jQuery(this).parent().animate({opacity:1},400)),jQuery(this).parent().toggleClass("active")}return!1}),this.o.external&&c.delegate("a","click",function(){$(this).parent().hasClass("section-share")||(this.target="_blank")})},rotate:function(a){b("rotate");var c=this,d=jQuery("."+this.o.cstream,a),e=this.o.speed,f=this.o.rotate.delay,g="up"==this.o.rotate.direction?"prev":"next";this.timer_on=1,jQuery(".controls .play").removeClass("play").addClass("pause"),this.timerId=setTimeout(function(){o(d,g,e),c.rotate(a)},f)},pauseTimer:function(){clearTimeout(this.timerId),this.timer_on=0,jQuery(".controls .pause").removeClass("pause").addClass("play")}}),jQuery.fn.dcSocialStream=function(a,b){var d={};return this.each(function(){var e=jQuery(this);d=e.data("socialtabs"),d||(d=new c(this,a,b),e.data("socialtabs",d))}),d},function(){b("SocialStream.onDomReady");var a=jQuery(this);return"1"==a.data("moderate")&&t(this),a.dcSocialStream({feeds:{twitter:{id:String(a.data("twitter_search_for")),intro:"",search:"",out:"intro,image,"+String(a.data("twitter_show_text")),retweets:!1,replies:!1,images:"small",url:a.data("callback"),icon:"twitter.png"},instagram:{id:String(a.data("instagram_search_for")),intro:"",search:"",out:"intro,thumb",accessToken:a.data("instagram_access_token"),redirectUrl:a.data("instagram_redirect_url"),clientId:a.data("instagram_client_id"),thumb:"low_resolution",comments:0,likes:0,icon:"instagram.png"},facebook:{id:String(a.data("facebook_search_for")),intro:"",out:"intro,title,text",text:"content",comments:0,image_width:5,icon:"facebook.png"},youtube:{id:String(a.data("youtube_search_for")),intro:"",search:"",out:"intro,thumb,title",feed:"uploads",thumb:"0",icon:"youtube.png"}},wall:a.data("wall"),controls:!1,height:parseInt(a.data("height")),rotate:{delay:parseInt(a.data("rotate_delay")),direction:String(a.data("rotate_direction"))},iconPath:a.data("path")+"/images/",imagePath:a.data("path")+"/images/",cache:!0,limit:parseInt(a.data("limit")),max:"limit",remove:String(a.data("remove"))}),jQuery(window).resize(v),this}});