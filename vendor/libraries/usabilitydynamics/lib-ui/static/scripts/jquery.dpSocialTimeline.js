!function(a){function b(b,c){this.timeline=a(b),this.settings=a.extend({},a.fn.dpSocialTimeline.defaults,c);var d=this.settings.feeds,e=this.settings.custom;this.feeds=new Array,this.custom=new Array,this.social=new Array,this.timeline_id="";for(x in this.settings.feeds){if(this.feeds[x+"_arr"]=d[x].data.split(","),"undefined"!=typeof d[x].limit)try{this.feeds[x+"_limit"]=isNaN(d[x].limit)?d[x].limit.split(","):d[x].limit}catch(f){}"undefined"==typeof this.feeds[x+"_limit"]&&(this.feeds[x+"_limit"]=0),this.feeds[x+"_url"]=new Array,this.timeline_id+=this.feeds[x+"_arr"]}for(x in this.settings.custom)this.custom[x+"_url"]=new Array(e[x].url),this.custom[x+"_name"]=new Array(e[x].name),this.custom[x+"_icon"]=new Array(e[x].icon),this.custom[x+"_limit"]=e[x].limit,this.social.push({name:this.custom[x+"_name"],url:this.custom[x+"_url"],id:x,icon:this.custom[x+"_icon"],limit:this.custom[x+"_limit"]}),this.timeline_id+=this.custom[x+"_url"];this.totalFeeds=0,this.resizeTimer,this.nameFeeds=new Array,this.iconFeeds=new Array,this.limitFeeds=new Array,this.entry=new Array,this.settings.itemWidthOrig=this.settings.itemWidth;var g=new String(window.document.location);switch(this.prefix=-1!=g.indexOf("https://")?"https://":"http://",this.settings.layoutMode){case"timeline":this.settings.layoutMode="spineAlign",""!=this.settings.timelineItemWidth&&(this.settings.itemWidth=this.settings.timelineItemWidth);break;case"columns":this.settings.layoutMode="masonry",""!=this.settings.columnsItemWidth&&(this.settings.itemWidth=this.settings.columnsItemWidth);break;case"one_column":this.settings.layoutMode="straightDown",""!=this.settings.oneColumnItemWidth&&(this.settings.itemWidth=this.settings.oneColumnItemWidth)}this.lastLayout=this.settings.layoutMode,this.timeline.addClass(this.settings.skin),this.init()}b.prototype={init:function(){var b=this;if(this.feeds.twitter_arr){for(var c=0;c<this.feeds.twitter_arr.length;c++)this.feeds.twitter_url[c]=a.trim(this.feeds.twitter_arr[c])+"&t="+(new Date).getTime();this.social.push({name:this.feeds.twitter_arr,url:this.feeds.twitter_url,id:"twitter",icon:"",limit:this.feeds.twitter_limit})}if(this.feeds.twitter_hash_arr){for(var c=0;c<this.feeds.twitter_hash_arr.length;c++)this.feeds.twitter_hash_url[c]=a.trim(this.feeds.twitter_hash_arr[c])+"&t="+(new Date).getTime();this.social.push({name:this.feeds.twitter_hash_arr,url:this.feeds.twitter_hash_url,id:"twitter",icon:"",limit:this.feeds.twitter_hash_limit})}if(this.feeds.lastfm_tracks_arr){for(var c=0;c<this.feeds.lastfm_tracks_arr.length;c++)this.feeds.lastfm_tracks_url[c]="http://ws.audioscrobbler.com/1.0/user/"+a.trim(this.feeds.lastfm_tracks_arr[c])+"/recenttracks.rss";this.social.push({name:this.feeds.lastfm_tracks_arr,url:this.feeds.lastfm_tracks_url,id:"lastfm",icon:"",limit:this.feeds.lastfm_tracks_limit})}if(this.feeds.lastfm_events_arr){for(var c=0;c<this.feeds.lastfm_events_arr.length;c++)this.feeds.lastfm_events_url[c]="http://ws.audioscrobbler.com/1.0/user/"+a.trim(this.feeds.lastfm_events_arr[c])+"/events.rss";this.social.push({name:this.feeds.lastfm_events_arr,url:this.feeds.lastfm_events_url,id:"lastfm",icon:"",limit:this.feeds.lastfm_events_limit})}if(this.feeds.lastfm_loved_arr){for(var c=0;c<this.feeds.lastfm_loved_arr.length;c++)this.feeds.lastfm_loved_url[c]="http://ws.audioscrobbler.com/2.0/user/"+a.trim(this.feeds.lastfm_loved_arr[c])+"/lovedtracks.rss";this.social.push({name:this.feeds.lastfm_loved_arr,url:this.feeds.lastfm_loved_url,id:"lastfm",icon:"",limit:this.feeds.lastfm_loved_limit})}if(this.feeds.lastfm_artist_events_arr){for(var c=0;c<this.feeds.lastfm_artist_events_arr.length;c++)this.feeds.lastfm_artist_events_url[c]="http://ws.audioscrobbler.com/1.0/artist/"+a.trim(this.feeds.lastfm_artist_events_arr[c])+"/events.rss";this.social.push({name:this.feeds.lastfm_artist_events_arr,url:this.feeds.lastfm_artist_events_url,id:"lastfm",icon:"",limit:this.feeds.lastfm_artist_events_limit})}if(this.feeds.lastfm_journal_arr){for(var c=0;c<this.feeds.lastfm_journal_arr.length;c++)this.feeds.lastfm_journal_url[c]="http://ws.audioscrobbler.com/1.0/user/"+a.trim(this.feeds.lastfm_journal_arr[c])+"/journals.rss";this.social.push({name:this.feeds.lastfm_journal_arr,url:this.feeds.lastfm_journal_url,id:"lastfm",icon:"",limit:this.feeds.lastfm_journal_limit})}if(this.feeds.google_arr){for(var c=0;c<this.feeds.google_arr.length;c++)this.feeds.google_url[c]=a.trim(this.feeds.google_arr[c]);this.social.push({name:this.feeds.google_arr,url:this.feeds.google_url,id:"google",icon:"",limit:this.feeds.google_limit})}if(this.feeds.instagram_arr){for(var c=0;c<this.feeds.instagram_arr.length;c++)this.feeds.instagram_url[c]="http://widget.stagram.com/rss/n/"+a.trim(this.feeds.instagram_arr[c]+"/");this.social.push({name:this.feeds.instagram_arr,url:this.feeds.instagram_url,id:"instagram",icon:"",limit:this.feeds.instagram_limit})}if(this.feeds.instagram_hash_arr){for(var c=0;c<this.feeds.instagram_hash_arr.length;c++)this.feeds.instagram_hash_url[c]="http://instagram.com/tags/"+a.trim(this.feeds.instagram_hash_arr[c])+"/feed/recent.rss";this.social.push({name:this.feeds.instagram_hash_arr,url:this.feeds.instagram_hash_url,id:"instagram",icon:"",limit:this.feeds.instagram_hash_limit})}if(this.feeds.soundcloud_arr){for(var c=0;c<this.feeds.soundcloud_arr.length;c++)this.feeds.soundcloud_url[c]="http://picklemonkey.net/cloudflipper/cloudflipper.php?feed=https://soundcloud.com/"+a.trim(this.feeds.soundcloud_arr[c]);this.social.push({name:this.feeds.soundcloud_arr,url:this.feeds.soundcloud_url,id:"soundcloud",icon:"https://a2.sndcdn.com/assets/images/sc-icons/favicon-154f6af5.ico",limit:this.feeds.soundcloud_limit})}if(this.feeds.facebook_page_arr){for(var c=0;c<this.feeds.facebook_page_arr.length;c++)this.feeds.facebook_page_url[c]="http://www.facebook.com/feeds/page.php?id="+a.trim(this.feeds.facebook_page_arr[c])+"&format=atom10";this.social.push({name:this.feeds.facebook_page_arr,url:this.feeds.facebook_page_url,id:"facebook",icon:"",limit:this.feeds.facebook_page_limit})}if(this.feeds.delicious_arr){for(var c=0;c<this.feeds.delicious_arr.length;c++)this.feeds.delicious_url[c]="http://feeds.delicious.com/v2/rss/"+a.trim(this.feeds.delicious_arr[c]);this.social.push({name:this.feeds.delicious_arr,url:this.feeds.delicious_url,id:"delicious",icon:"",limit:this.feeds.delicious_limit})}if(this.feeds.flickr_arr){for(var c=0;c<this.feeds.flickr_arr.length;c++)this.feeds.flickr_url[c]="http://api.flickr.com/services/feeds/photos_public.gne?id="+a.trim(this.feeds.flickr_arr[c])+"&format=rss_200";this.social.push({name:this.feeds.flickr_arr,url:this.feeds.flickr_url,id:"flickr",icon:"",limit:this.feeds.flickr_limit})}if(this.feeds.flickr_hash_arr){for(var c=0;c<this.feeds.flickr_hash_arr.length;c++)this.feeds.flickr_hash_url[c]="http://api.flickr.com/services/feeds/photos_public.gne?tags="+a.trim(this.feeds.flickr_hash_arr[c])+"&lang=es-us&format=rss_200";this.social.push({name:this.feeds.flickr_hash_arr,url:this.feeds.flickr_hash_url,id:"flickr",icon:"",limit:this.feeds.flickr_hash_limit})}if(this.feeds.tumblr_arr){for(var c=0;c<this.feeds.tumblr_arr.length;c++)this.feeds.tumblr_url[c]="http://"+a.trim(this.feeds.tumblr_arr[c])+".tumblr.com/rss";this.social.push({name:this.feeds.tumblr_arr,url:this.feeds.tumblr_url,id:"tumblr",icon:"",limit:this.feeds.tumblr_limit})}if(this.feeds.youtube_arr){for(var c=0;c<this.feeds.youtube_arr.length;c++)this.feeds.youtube_url[c]="http://gdata.youtube.com/feeds/base/users/"+a.trim(this.feeds.youtube_arr[c])+"/uploads";this.social.push({name:this.feeds.youtube_arr,url:this.feeds.youtube_url,id:"youtube",icon:"",limit:this.feeds.youtube_limit})}if(this.feeds.youtube_search_arr){for(var c=0;c<this.feeds.youtube_search_arr.length;c++)this.feeds.youtube_search_url[c]="http://gdata.youtube.com/feeds/api/videos?alt=atom&racy=include&vq="+a.trim(this.feeds.youtube_search_arr[c]);this.social.push({name:this.feeds.youtube_search_arr,url:this.feeds.youtube_search_url,id:"youtube",icon:"",limit:this.feeds.youtube_search_limit})}if(this.feeds.dribbble_arr){for(var c=0;c<this.feeds.dribbble_arr.length;c++)this.feeds.dribbble_url[c]="http://dribbble.com/players/"+a.trim(this.feeds.dribbble_arr[c])+"/shots.rss";this.social.push({name:this.feeds.dribbble_arr,url:this.feeds.dribbble_url,id:"dribbble",icon:"",limit:this.feeds.dribbble_limit})}if(this.feeds.digg_arr){for(var c=0;c<this.feeds.digg_arr.length;c++)this.feeds.digg_url[c]="http://digg.com/users/"+a.trim(this.feeds.digg_arr[c])+"/history.rss";this.social.push({name:this.feeds.digg_arr,url:this.feeds.digg_url,id:"digg",icon:"",limit:this.feeds.digg_limit})}if(this.feeds.pinterest_arr){for(var c=0;c<this.feeds.pinterest_arr.length;c++)this.feeds.pinterest_url[c]="http://www.pinterest.com/"+a.trim(this.feeds.pinterest_arr[c])+"/feed.rss";this.social.push({name:this.feeds.pinterest_arr,url:this.feeds.pinterest_url,id:"pinterest",icon:"",limit:this.feeds.pinterest_limit})}if(this.feeds.vimeo_arr){for(var c=0;c<this.feeds.vimeo_arr.length;c++)this.feeds.vimeo_url[c]="http://vimeo.com/"+a.trim(this.feeds.vimeo_arr[c])+"/videos/rss";this.social.push({name:this.feeds.vimeo_arr,url:this.feeds.vimeo_url,id:"vimeo",icon:"",limit:this.feeds.vimeo_limit})}this.timeline.addClass("dpSocialTimelineLoading"),this._parseFeeds(),a(window).bind("resize",function(){(a(window).height()!=b.lastWindowHeight||a(window).width()!=b.lastWindowWidth)&&(b.lastWindowHeight=a(window).height(),b.lastWindowWidth=a(window).width(),b._updateTimelineSize())});var d="http://platform.twitter.com/widgets.js";a.getScript(d)},_supports_html5_storage:function(){try{return"localStorage"in window&&null!==window.localStorage}catch(a){return!1}},_createCookie:function(a,b){this._supports_html5_storage()&&(localStorage[a]=b)},_deleteCookie:function(a){this._supports_html5_storage()&&(localStorage[a]=null)},_getCookie:function(a){return this._supports_html5_storage()?localStorage[a]:null},_updateTimelineSize:function(){this.timeline.width()<480?(a("button",this.timeline).removeClass("active"),a(".dpSocialTimeline_layout",this.timeline).hide(),this.settings.showFilter&&1!=this.totalFeeds||a(".dpSocialTimeline_divider",this.timeline).hide(),a(".dpSocialTimeline_lineWrap",this.timeline).fadeOut("fast"),a(".dpSocialTimeline_item",this.timeline).css("width","99%"),a(".dpSocialTimeline",this.timeline).isotope({layoutMode:"straightDown"})):a("button."+this.lastLayout,this.timeline).hasClass("active")&&"straightDown"!=this.lastLayout||(this.settings.showLayout&&a(".dpSocialTimeline_layout",this.timeline).show(),a("button."+this.lastLayout,this.timeline).trigger("click"))},_addSocial:function(b,c){var d=this;""!=this.social[b].name?this._parseRSS(this.social[b].url[c],this.social[b].limit,c,function(e,f){function g(){d.social[b].url.length>=c+1&&d._addSocial(b,c+1),f==d.social[b].url.length-1&&(parseInt(b,10)==d.social.length-1?(d.settings.cache&&(d._createCookie("dpSocialTimeline_"+d.timeline_id,JSON.stringify(d.entry),1),d._createCookie("dpSocialTimeline_NameFeeds_"+d.timeline_id,JSON.stringify(d.nameFeeds),1),d._createCookie("dpSocialTimeline_IconFeeds_"+d.timeline_id,JSON.stringify(d.iconFeeds),1),d._createCookie("dpSocialTimeline_LimitFeeds_"+d.timeline_id,JSON.stringify(d.limitFeeds),1),d._createCookie("dpSocialTimeline_TotalFeeds_"+d.timeline_id,JSON.stringify(d.totalFeeds),1),d._createCookie("dpSocialTimeline_Time"+d.timeline_id,Math.round(a.now()/1e3),1)),d._output()):d._addSocial(b+1,0))}var h=e.xmlString,e=e.feed;if(!e)return g(),!1;d.nameFeeds[d.totalFeeds]=d.social[b].id,d.iconFeeds[d.totalFeeds]=d.social[b].icon,d.limitFeeds[d.totalFeeds]=d.social[b].limit,d.totalFeeds++;for(var i=0;i<e.entries.length;i++){if(e.entries[i].name=d.social[b].id,e.entries[i].icon=d.social[b].icon,e.entries[i].limit=d.social[b].limit,e.entries[i].search_item=d.social[b].name[f],"undefined"!=typeof h){var j=a.parseXML(h),k=a(j),l=k.find("enclosure")[i],m=k.find("description")[i+1],n=k.find("guid")[i];l&&(e.entries[i].enclosure=a(l).attr("url"),e.entries[i].enclosure_type=a(l).attr("type")),n&&(e.entries[i].guid=a(n).text()),m&&"tumblr"==e.entries[i].name&&(e.entries[i].content=a(m).text())}e.entries[i].feed_title=e.title,(""==e.entries[i].author||"Webstagram"==e.entries[i].author)&&(e.entries[i].author=d.social[b].name[f]),(""!=e.entries[i].title||""!=e.entries[i].contentSnippet||""!=d._strip_tags(e.entries[i].content))&&d.entry.push(e.entries[i])}g()},this.settings.total):parseInt(b,10)==this.social.length-1?(this.settings.cache&&(this._createCookie("dpSocialTimeline_"+this.timeline_id,JSON.stringify(this.entry),1),this._createCookie("dpSocialTimeline_NameFeeds_"+this.timeline_id,JSON.stringify(this.nameFeeds),1),this._createCookie("dpSocialTimeline_IconFeeds_"+this.timeline_id,JSON.stringify(this.iconFeeds),1),this._createCookie("dpSocialTimeline_LimitFeeds_"+this.timeline_id,JSON.stringify(this.limitFeeds),1),this._createCookie("dpSocialTimeline_TotalFeeds_"+this.timeline_id,JSON.stringify(this.totalFeeds),1),this._createCookie("dpSocialTimeline_Time"+this.timeline_id,Math.round(a.now()/1e3),1)),this._output()):this._addSocial(b+1,0)},_parseFeeds:function(){if(this.settings.cache&&this._getCookie("dpSocialTimeline_"+this.timeline_id)&&""!=this._getCookie("dpSocialTimeline_"+this.timeline_id)&&"null"!=this._getCookie("dpSocialTimeline_"+this.timeline_id)){this.entry=a.parseJSON(this._getCookie("dpSocialTimeline_"+this.timeline_id)),this.nameFeeds=a.parseJSON(this._getCookie("dpSocialTimeline_NameFeeds_"+this.timeline_id)),this.iconFeeds=a.parseJSON(this._getCookie("dpSocialTimeline_IconFeeds_"+this.timeline_id)),this.limitFeeds=a.parseJSON(this._getCookie("dpSocialTimeline_LimitFeeds_"+this.timeline_id)),this.totalFeeds=a.parseJSON(this._getCookie("dpSocialTimeline_TotalFeeds_"+this.timeline_id));{new Date}this.settings.cacheTime<=Math.round(a.now()/1e3)-this._getCookie("dpSocialTimeline_Time"+this.timeline_id)&&(this._deleteCookie("dpSocialTimeline_"+this.timeline_id),this._deleteCookie("dpSocialTimeline_NameFeeds_"+this.timeline_id),this._deleteCookie("dpSocialTimeline_IconFeeds_"+this.timeline_id),this._deleteCookie("dpSocialTimeline_LimitFeeds_"+this.timeline_id),this._deleteCookie("dpSocialTimeline_TotalFeeds_"+this.timeline_id),this._deleteCookie("dpSocialTimeline_Time"+this.timeline_id)),this._output()}else this.settings.cache||(this._deleteCookie("dpSocialTimeline_"+this.timeline_id),this._deleteCookie("dpSocialTimeline_NameFeeds_"+this.timeline_id),this._deleteCookie("dpSocialTimeline_IconFeeds_"+this.timeline_id),this._deleteCookie("dpSocialTimeline_LimitFeeds_"+this.timeline_id),this._deleteCookie("dpSocialTimeline_TotalFeeds_"+this.timeline_id),this._deleteCookie("dpSocialTimeline_Time"+this.timeline_id)),this._addSocial(0,0)},_strip_tags:function(a,b){b=(((b||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var c=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,d=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;return a.replace(d,"").replace(c,function(a,c){return b.indexOf("<"+c.toLowerCase()+">")>-1?a:""})},_output:function(){var b=this,c={$dpSocialTimelineLine:"",$dpSocialTimelineFilter:"",$dpSocialTimelineLayout:"",$dpSocialTimelineLineWrap:"",$dpSocialTimelineContent:"",$div:"",showDivider:!1,appendFilter:!1,appendLayout:!1},d=new Array;if(c.$div=a("<div>").addClass("dpSocialTimeline"),c.$dpSocialTimelineLine=a("<div />").addClass("dpSocialTimeline_line"),c.$dpSocialTimelineLineWrap=a("<div />").addClass("dpSocialTimeline_lineWrap").append(a(c.$dpSocialTimelineLine)),a(c.$div).append(c.$dpSocialTimelineLineWrap),this.entry.sort(function(a,b){return a=new Date(a.publishedDate).getTime(),b=new Date(b.publishedDate).getTime(),a==b?0:a>b?-1:1}),this._createMarkup(c,0,!1),a(".dpSocialTimeline_item",c.$div).width(this.settings.itemWidth),this.settings.showFilter&&this.totalFeeds>1){c.$dpSocialTimelineFilter=a("<div />").addClass("dpSocialTimeline_filter");for(var e=0;e<=this.totalFeeds;e++)"undefined"!=typeof this.nameFeeds[e]&&-1===a.inArray(this.nameFeeds[e],d)&&(c.$dpSocialTimelineFilter.append(a("<button />").attr({"data-filter":"."+this.nameFeeds[e]}).append(a("<span />").addClass("favicon "+this.nameFeeds[e]))),"undefined"!=typeof this.iconFeeds[e]&&""!=this.iconFeeds[e]&&a("."+this.nameFeeds[e],c.$dpSocialTimelineFilter).css("background-image","url("+this.iconFeeds[e]+")"),d[e]=this.nameFeeds[e]);d.length>1&&(c.appendFilter=!0,c.showDivider=!0)}c.$dpSocialTimelineLayout=a("<div />").addClass("dpSocialTimeline_layout"),this.settings.showLayoutTimeline&&c.$dpSocialTimelineLayout.append(a("<button />").attr({"data-style":"spineAlign"}).addClass("spineAlign").append(a("<span />"))),this.settings.showLayoutColumns&&c.$dpSocialTimelineLayout.append(a("<button />").attr({"data-style":"masonry"}).addClass("masonry").append(a("<span />"))),this.settings.showLayoutOneColumn&&c.$dpSocialTimelineLayout.append(a("<button />").attr({"data-style":"straightDown"}).addClass("straightDown").append(a("<span />"))),c.appendLayout=!0,this.settings.showLayout?c.showDivider=!0:c.$dpSocialTimelineLayout.hide(),b._onLoadHook(c),c.$dpSocialTimelineFilter.length&&a("button",c.$dpSocialTimelineFilter).click(function(){b.settings.allowMultipleFilters||a("button",c.$dpSocialTimelineFilter).not(this).removeClass("active"),a(this).hasClass("active")?a(this).removeClass("active"):a(this).addClass("active");var d="";return a(".dpSocialTimeline_item.filtered",c.$div).removeClass("filtered"),a("button.active",c.$dpSocialTimelineFilter).each(function(b){""!=a(this).attr("data-filter")&&"undefined"!=typeof a(this).attr("data-filter")&&(b>0&&(d+=","),d+=a(this).attr("data-filter"),a(".dpSocialTimeline_item"+a(this).attr("data-filter"),c.$div).addClass("filtered"))}),""==d?(d=".dpSocialTimeline_item:lt("+b.settings.total+")",c.$div.isotope({filter:d}),a(".dpSocialTimeline_item:gt("+(b.settings.total-1)+")",c.$div).css({opacity:0,scale:.001,display:"block"})):(d=".filtered:lt("+b.settings.total+")",c.$div.isotope({filter:d}),a(".dpSocialTimeline_item.filtered:gt("+(b.settings.total-1)+")",c.$div).css({opacity:0,scale:.001,display:"none"}),a(".dpSocialTimeline_item.filtered:lt("+b.settings.total+")",c.$div).css({opacity:1,scale:1,display:"block"})),!1}),a("button",c.$dpSocialTimelineLayout).click(function(){if(!a(this).hasClass("active")){if(a("button",c.$dpSocialTimelineLayout).removeClass("active"),a(this).addClass("active"),""!=a(this).attr("data-style")&&"undefined"!=typeof a(this).attr("data-style")){switch(b.lastLayout=a(this).attr("data-style"),b.lastLayout){case"spineAlign":c.$dpSocialTimelineLineWrap.fadeIn("fast"),""!=b.settings.timelineItemWidth?a(".dpSocialTimeline_item",c.$div).css("width",b.settings.timelineItemWidth):a(".dpSocialTimeline_item",c.$div).width(b.settings.itemWidthOrig);break;case"masonry":c.$dpSocialTimelineLineWrap.fadeOut("fast"),""!=b.settings.columnsItemWidth?a(".dpSocialTimeline_item",c.$div).css("width",b.settings.columnsItemWidth):a(".dpSocialTimeline_item",c.$div).width(b.settings.itemWidthOrig);break;case"straightDown":c.$dpSocialTimelineLineWrap.fadeOut("fast"),""!=b.settings.oneColumnItemWidth?a(".dpSocialTimeline_item",c.$div).css("width",b.settings.oneColumnItemWidth):a(".dpSocialTimeline_item",c.$div).width(b.settings.itemWidthOrig)}c.$div.isotope({layoutMode:a(this).attr("data-style")}),a(".dpSocialTimeline_item.filtered",c.$div).length?(a(".dpSocialTimeline_item.filtered:gt("+(b.settings.total-1)+")",c.$div).css({opacity:0,scale:.001,display:"none"}),a(".dpSocialTimeline_item.filtered:lt("+b.settings.total+")",c.$div).css({opacity:1,scale:1,display:"block"})):a(".dpSocialTimeline_item:gt("+(b.settings.total-1)+")",c.$div).css({opacity:0,scale:.001,display:"none"})}return!1}})},_createMarkup:function(b,c,d){var e=this;for(x=c;x<this.entry.length;x++){this.settings.showSocialIcons?($favicon=a("<span />").addClass("favicon "+this.entry[x].name),"undefined"!=typeof this.entry[x].icon&&""!=this.entry[x].icon&&a($favicon).css("background-image","url("+this.entry[x].icon+")")):$favicon="",date_published=new Date(this.entry[x].publishedDate),published_parse=Date.UTC(date_published.getFullYear(),date_published.getMonth(),date_published.getDate(),date_published.getHours(),date_published.getMinutes()),$time=a("<span />").addClass("time").html(this._relativeTime(published_parse)),$permalink=a("<a />").addClass("permalink").attr({href:this.entry[x].link,target:"_blank"}),"http://www.youtube.com/watch"==this.entry[x].link.substr(0,28)?(is_youtube=!0,this.entry[x].thumbnail="http://i.ytimg.com/vi/"+this._getYoutubeId(this.entry[x].link)+"/0.jpg",is_vimeo=!1,$video_icon=a("<div />").addClass("video_icon")):"http://vimeo.com"==this.entry[x].link.substr(0,16)?(is_youtube=!1,is_vimeo=!0,$video_icon=a("<div />").addClass("video_icon")):(is_youtube=!1,is_vimeo=!1,$video_icon="");var f=this.entry[x].author,g=this.entry[x].feed_title,h=(this.entry[x].enclosure,this.entry[x].guid);if(f="flickr"==this.entry[x].name?this.entry[x].author.match(/\((.*?)\)/g)[0]:f.replace(/\((.*?)\)/g,""),"twitter"==this.entry[x].name&&(f="@"+f),"google"==this.entry[x].name&&(f=g.substr(0,g.indexOf(".")).replace("Public RSS-Feed of ","")),"soundcloud"==this.entry[x].name&&(f=g),b.$dpSocialTimelineContent=a("<div />").addClass("dpSocialTimelineContent"),-1!==this.entry[x].link.indexOf("twitter.com")){var i=this.entry[x].link.split("/"),j=i[5];title=this._linkify(this.entry[x].title.replace(new RegExp("("+this.preg_quote(f.replace("@","")+": ")+")","gi"),"")),a(b.$dpSocialTimelineContent).append(a("<div>").addClass("dpSocialTimelineTwitterActions").append(a("<a>").attr({href:"https://twitter.com/intent/tweet?in_reply_to="+j}).addClass("tw_reply").text("Reply")).append(a("<a>").attr({href:"https://twitter.com/intent/retweet?tweet_id="+j}).addClass("tw_retweet").text("Retweet")).append(a("<a>").attr({href:"https://twitter.com/intent/favorite?tweet_id="+j}).addClass("tw_favorite").text("Favorite")))}else-1!==this.entry[x].link.indexOf("facebook.com")||-1!==this.entry[x].link.indexOf("pinterest.com")?(this.entry[x].content=this.entry[x].content.replace('rel="nofollow">www','rel="nofollow">http://www'),title=this._linkify(this._strip_tags(this.entry[x].content,"<br>, <p>")).replace("<br><br>",""),0==title.indexOf("<br>")&&(title=title.substr(4)),""==title&&(title=this._linkify(this.entry[x].title))):title=this._linkify(this.entry[x].title);if("tumblr"==this.entry[x].name&&-1!=this.entry[x].content.indexOf("<iframe")&&(title=this.entry[x].content),"modern"!=this.settings.skin&&a(b.$dpSocialTimelineContent).prepend(a("<div>").addClass("dpSocialTimelineText").html(title)),""!=this._getImage(this.entry[x],!1)?($get_image=this._getImage(this.entry[x],!1),$img_link=a("<a />").attr({href:this.entry[x].link,target:"_blank"}).addClass("img_link"+(is_youtube||is_vimeo?" youtube":"")),a($img_link).append($get_image).append($video_icon),(this.settings.addColorbox||this.settings.addLightbox)&&"google"!=this.entry[x].name&&(a($img_link).addClass("addColorbox"),is_youtube?a($img_link).attr({href:this.entry[x].link.replace("&feature=youtube_gdata","")}):is_vimeo||a($img_link).attr({href:this._getImage(this.entry[x],!0)})),b.$dpSocialTimelineContent.append($img_link)):a(b.$dpSocialTimelineContent).addClass("dpSocialTimeline_noImage"),"soundcloud"==this.entry[x].name){var k=h.substr(h.lastIndexOf("/")+1);b.$dpSocialTimelineContent.addClass("track-"+k),a.getJSON("http://soundcloud.com/oembed?callback=?",{format:"js",url:h,iframe:!0,guid:".track-"+h.substr(h.lastIndexOf("/")+1)},function(c){var d=this.url.substr(this.url.lastIndexOf(".track")).split("&");"modern"==e.settings.skin?a(a(b.$div).find(d[0])[0]).prepend(c.html):a(a(b.$div).find(d[0])[0]).append(a("<br />")).append(a("<br />")).append(c.html),b.$div.isotope("reLayout")})}"modern"==this.settings.skin&&a(b.$dpSocialTimelineContent).append(a("<div>").addClass("dpSocialTimelineText").html(title));var l=jQuery("<a />").addClass("share_twitter").attr({href:"http://twitter.com/share?original_referer="+this.entry[x].link+"&text="+(this._strip_tags(title).length>110?this._strip_tags(title).substr(0,110)+"... - ":this._strip_tags(title)),title:"Share in Twitter"}).click(function(){var a=575,b=400,c=(jQuery(window).width()-a)/2,d=(jQuery(window).height()-b)/2,e=this.href,f="status=1,width="+a+",height="+b+",top="+d+",left="+c;return window.open(e,"twitter",f),!1}),m=jQuery("<a />").addClass("share_facebook").attr({href:"http://www.facebook.com/share.php?u="+this.entry[x].link,title:"Share in Facebook"}).click(function(){var a=575,b=400,c=(jQuery(window).width()-a)/2,d=(jQuery(window).height()-b)/2,e=this.href,f="status=1,width="+a+",height="+b+",top="+d+",left="+c;return window.open(e,"facebook",f),!1});$stContentHead=a("<div />").addClass("dpSocialTimelineContentHead").append(a($favicon)).append(a("<span />").addClass("user").append(a("<strong/>").html(f).text())).append(a($permalink)).append(a("<div />").css("clear","both")),$stContentFoot=a("<div />").addClass("dpSocialTimelineContentFoot").append(a($time)).append(this.settings.share?a(l):"").append(this.settings.share?a(m):""),b.$dpSocialTimelineContent.append(a("<div />").css("clear","both")),$li=a("<div>").addClass((d?"dpSocialTimeline_hideMe ":"")+"dpSocialTimeline_item").addClass(this.entry[x].name).append(a($stContentHead)).append(a(b.$dpSocialTimelineContent)).append(a($stContentFoot)).attr({"data-timeline-time":new Date(this.entry[x].publishedDate).getTime()}),a(b.$div).append($li)}},_onLoadHook:function(b){var c=this;a(c.timeline).append(a(b.$div).hide()),a("img",c.timeline).dpSocialTimeline_batchImageLoad({loadingCompleteCallback:function(){b.showDivider&&a(c.timeline).prepend(a("<div />").addClass("dpSocialTimeline_divider")),b.appendLayout&&a(c.timeline).prepend(b.$dpSocialTimelineLayout),b.appendFilter&&a(c.timeline).prepend(b.$dpSocialTimelineFilter),a(b.$div).show(),a(c.timeline).removeClass("dpSocialTimelineLoading"),"spineAlign"==c.settings.layoutMode&&a(b.$dpSocialTimelineLineWrap).show(),a(b.$div).isotope({itemSelector:".dpSocialTimeline_item",layoutMode:c.settings.layoutMode,itemPositionDataEnabled:!0,getSortData:{time:function(a){return a.attr("data-timeline-time")}},sortBy:"time",sortAscending:!1,spineAlign:{gutterWidth:20},transformsEnabled:c.settings.rtl?!1:!0,onLayout:function(c,d){a(b.$dpSocialTimelineLayout).find("button[data-style='"+d.options.layoutMode+"']").addClass("active"),a("span",b.$dpSocialTimelineLine).fadeOut("fast",function(){a(this).remove()}),c.each(function(){var c=a("<span />");b.$dpSocialTimelineLine.append(c.css({top:a(this).data("isotope-item-position").y+18}))})}}),a(b.$div).isotope({filter:".dpSocialTimeline_item:lt("+c.settings.total+")"}),a(".dpSocialTimeline_item:gt("+(c.settings.total-1)+")",b.$div).css({opacity:0,scale:.001}),a(".dpSocialTimeline_item",b.$div).width(c.settings.itemWidth),(c.settings.addColorbox||c.settings.addLightbox)&&(a(b.$div).find(".addColorbox:not(.youtube)").magnificPopup({type:"image"}),a(b.$div).find(".addColorbox.youtube").magnificPopup({type:"iframe"})),c._updateTimelineSize()}})},_parseRSS:function(b,c,d,e,f){if(null==b)return!1;var g=this.prefix+"ajax.googleapis.com/ajax/services/feed/load?v=1.0&output=json_xml&callback=?&q="+encodeURIComponent(b);null!=c&&c>0&&"undefined"!=typeof c?g+="&num="+c:a.isArray(c)?g+="&num="+c[d]:null!=f&&(g+="&num="+f),(-1!==b.indexOf("user_timeline.php")||-1!==b.indexOf("search.php"))&&(g=b,null!=c&&c>0&&"undefined"!=typeof c?g+="&count="+c:null!=f&&(g+="&count="+f)),a.getJSON(g,function(a){if("function"!=typeof e)return!1;try{a.responseData.feed}catch(b){return console.log("Feed: "+g+" could not be loaded"),e.call(this,!1,d),!1}e.call(this,a.responseData,d)})},preg_quote:function(a){return(a+"").replace(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g,"\\$1")},_relativeTime:function(a){var b=a,c=arguments.length>1?arguments[1]:new Date,d=parseInt((Date.UTC(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes())-b)/1e3),e="";return e=60>d?this.settings.lang_less:120>d?this.settings.lang_about+" 1 "+this.settings.lang_minute+" "+this.settings.lang_ago:3600>d?this.settings.lang_about+" "+parseInt(d/60).toString()+" "+this.settings.lang_minutes+" "+this.settings.lang_ago:7200>d?this.settings.lang_about+" 1 "+this.settings.lang_hour+" "+this.settings.lang_ago:86400>d?this.settings.lang_about+" "+parseInt(d/3600).toString()+" "+this.settings.lang_hours+" "+this.settings.lang_ago:172800>d?"1 "+this.settings.lang_day+" "+this.settings.lang_ago:parseInt(d/86400).toString()+" "+this.settings.lang_days+" "+this.settings.lang_ago},_getImage:function(b,c){var d,e=new Array,f=/<img .*?src=["\']([^ ^"^\']*)["\']/gi,g="",h=b.content,i=b.title;if(""!=b.thumbnail&&"undefined"!=typeof b.thumbnail)e[0]=b.thumbnail;else for(;d=f.exec(h);)e.push(d[1]);if(e.length>0&&-1===e[0].indexOf("sndcdn.com")){var j=e[0];return-1!==j.indexOf("instagram.com/profiles")&&(j=e[1]),j=j.replace("_m.jpg",".jpg"),-1==j.indexOf("fbcdn.net/")?(j=j.replace("_b.jpg","_f.jpg"),j=j.replace("_b.png","_f.png")):(j=j.replace("_t.jpg","_b.jpg"),j=j.replace("_t.png","_b.png")),j=j.replace("_s.jpg","_b.jpg"),j=j.replace("_m.png",".png"),j=j.replace("_s.png","_b.png"),j=j.replace("&amp;","&"),-1!=j.indexOf("safe_image.php")&&(j=unescape(j.match(/url=([^&]+)/)[1])),-1!=j.indexOf("app_full_proxy.php")&&(j=unescape(j.match(/src=([^&]+)/)[1])),g=(""!=this.settings.itemWidth?this.settings.itemWidth:200)-40,c?j:a("<img />").attr({src:j,alt:i}).addClass("item_thumb").css({width:"98%"})}return!1},_getYoutubeVideo:function(a){return a.replace(/http:\/\/(www.)?(youtu.be\/|youtube.com\/watch\?v=)([a-zA-Z0-9?%.;:\\/=+_-]+)([&]*([a-zA-Z0-9?&%.;:\\/=+_-]*))/i,"http://www.youtube.com/v/$3?fs=1&amp;hl=en_US")},_getYoutubeId:function(a){var b=/.*(?:youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=)([^#\&\?]*).*/,c=a.match(b);return c&&11==c[1].length?c[1]:!1},_getVimeoVideo:function(a){return a.replace(/http:\/\/(www.)?(vimeo.com\/)([a-zA-Z0-9?%.;:\\/=+_-]+)([&]*([a-zA-Z0-9?&%.;:\\/=+_-]*))/i,"http://player.vimeo.com/video/$3")},_linkify:function(a){return a.replace(/(\b((https?|ftp|file):\/\/|(www.))[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,function(a){return-1===a.indexOf("://")&&(a="http://"+a),'<a href="'+a+'" target="_blank">'+a+"</a>"})}},a.fn.dpSocialTimeline=function(c){var d;return this.each(function(){d=new b(a(this),c),a(this).data("dpSocialTimeline",d)}),this},a.fn.dpSocialTimeline.defaults={feeds:null,layoutMode:"timeline",addColorbox:!1,addLightbox:!1,showSocialIcons:!0,showFilter:!0,allowMultipleFilters:!0,showLayout:!0,showLayoutTimeline:!0,showLayoutColumns:!0,rtl:!1,cache:!1,cacheTime:900,showLayoutOneColumn:!0,itemWidth:200,share:!0,timelineItemWidth:"",columnsItemWidth:"",oneColumnItemWidth:"",skin:"light",total:10},a.fn.dpSocialTimeline.settings={},a.Isotope.prototype._spineAlignReset=function(){this.spineAlign={colA:0,colB:10}},a.Isotope.prototype._spineAlignLayout=function(b){var c=this,d=this.spineAlign,e=Math.round(this.options.spineAlign&&this.options.spineAlign.gutterWidth)||0,f=Math.round(this.element.width()/2);b.each(function(){var b=a(this),g=d.colB>d.colA,h=g?f-(b.outerWidth(!0)+e/2):f+e/2,i=g?d.colA:d.colB;c._pushPosition(b,h,i),g?b.removeClass("colB").addClass("colA"):b.removeClass("colA").addClass("colB"),d[g?"colA":"colB"]+=b.outerHeight(!0)})},a.Isotope.prototype._spineAlignGetContainerSize=function(){var a={};return a.height=this.spineAlign[this.spineAlign.colB>this.spineAlign.colA?"colB":"colA"],a},a.Isotope.prototype._spineAlignResizeChanged=function(){return!0},a.Isotope.prototype._positionAbs=function(a,b){return{right:a,top:b}},a.fn.dpSocialTimeline_batchImageLoad=function(b){var c=a(this),d=c.size(),e=d,f=0;a.fn.dpSocialTimeline_batchImageLoad.defaults={loadingCompleteCallback:null,imageLoadedCallback:null};var g=a.extend({},a.fn.dpSocialTimeline_batchImageLoad.defaults,b);c.each(function(){a(this)[0].complete?(e--,g.imageLoadedCallback&&g.imageLoadedCallback(f,d)):(a(this).load(function(){f++,g.imageLoadedCallback&&g.imageLoadedCallback(f,d),f>=e&&g.loadingCompleteCallback&&g.loadingCompleteCallback()
}),a(this).error(function(){f++,g.imageLoadedCallback&&g.imageLoadedCallback(f,d),f>=e&&g.loadingCompleteCallback&&g.loadingCompleteCallback()}))}),0>=e&&g.loadingCompleteCallback&&g.loadingCompleteCallback()}}(jQuery);